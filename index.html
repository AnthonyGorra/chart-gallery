// Financial chart data with detailed AI prompts
const galleryData = [
    {
        image: "Pie Chart Final.png",
        title: "Pie Chart Final",
        text: `When you receive a Statement of Advice, identify the client's asset allocation percentages. Look for sections detailing:
- Current investment portfolio breakdown
- Recommended asset allocation
- Percentage splits across asset classes (cash, fixed interest, property, Australian shares, international shares)

Extract these percentages and create a pie chart showing the allocation. For any information not found in the SOA, use "[REDACTED]" as a placeholder. Do NOT ask for missing information - these placeholders will be manually edited later in the drawio app.

Maintain all visual elements and styling of the original chart template while only updating the percentage values and labels as needed.`
    },
    {
        image: "Withdrawal, Recontribution & Refresh.png",
        title: "Withdrawal, Recontribution & Refresh",
        text: `For this chart, analyze the SOA for:
1. Client's superannuation withdrawal amount and date
2. Tax component details (tax-free vs. taxable components)
3. Recontribution strategy specifics:
   - Withdrawal amount
   - Tax implications
   - Recontribution timing and method
4. Refresh strategy details explaining how this improves the tax-free component ratio

For any information not found in the SOA, use "[REDACTED]" as a placeholder. Do NOT ask for missing information - these placeholders will be manually edited later in the drawio app.

Maintain all visual elements and flow structure of the original chart template while updating only the financial data and client-specific information.`
    },
    {
        image: "Withdrawal & Recontribution to New Pension or Spouse.png",
        title: "Withdrawal & Recontribution to New Pension or Spouse",
        text: `When analyzing the SOA, focus on:
1. Client's superannuation withdrawal details (amount, timing, fund name)
2. Whether the recontribution is directed to a spouse's account or a new pension account
3. Tax component implications before and after the strategy
4. Any age-based conditions or preservation requirements

For any information not found in the SOA, use "[REDACTED]" as a placeholder. Do NOT ask for missing information - these placeholders will be manually edited later in the drawio app.

Maintain all visual elements and flow structure of the original chart template while updating only the financial data and client-specific information.`
    },
    {
        image: "SMSF with Accumulation & Pensions.png",
        title: "SMSF with Accumulation & Pensions",
        text: `For this chart, extract from the SOA:
1. SMSF name and trustee structure
2. Account balances for both accumulation and pension accounts
3. Asset allocation within the SMSF
4. Transfer balance cap considerations
5. Current contribution strategies

For any information not found in the SOA, use "[REDACTED]" as a placeholder. Do NOT ask for missing information - these placeholders will be manually edited later in the drawio app.

Maintain all visual elements and flow structure of the original chart template while updating only the financial data and client-specific information.`
    },
    {
        image: "Rollover Super.png",
        title: "Rollover Super",
        text: `When analyzing the SOA for a super rollover chart, identify:
1. Source super fund name and current balance
2. Destination super fund name
3. Full or partial rollover amount
4. Timing of the rollover
5. Any insurance implications of the rollover

For any information not found in the SOA, use "[REDACTED]" as a placeholder. Do NOT ask for missing information - these placeholders will be manually edited later in the drawio app.

Maintain all visual elements and flow structure of the original chart template while updating only the fund names, balances, and rollover-specific information.`
    },
    {
        image: "Rollover & Commence Pension.png",
        title: "Rollover & Commence Pension",
        text: `For this chart, locate in the SOA:
1. Source superannuation fund and balance
2. Target pension fund
3. Amount to be rolled over and converted to pension
4. Pension commencement date
5. Minimum drawdown requirements based on age
6. Any preservation considerations

For any information not found in the SOA, use "[REDACTED]" as a placeholder. Do NOT ask for missing information - these placeholders will be manually edited later in the drawio app.

Maintain all visual elements and flow structure of the original chart template while updating only the financial data and client-specific information.`
    },
    {
        image: "Lump Sum Debt Repayments, Downsizer Contribution, Residual to Bank.png",
        title: "Lump Sum Debt Repayments, Downsizer Contribution, Residual to Bank",
        text: `When analyzing this complex strategy in the SOA, focus on:
1. Source of lump sum (likely property sale)
2. Total amount received
3. Debt repayment details (mortgage, loans, etc.)
4. Downsizer contribution amount (up to the eligible limit)
5. Residual amount designated for banking/investment
6. Age eligibility confirmation for downsizer contribution

For any information not found in the SOA, use "[REDACTED]" as a placeholder. Do NOT ask for missing information - these placeholders will be manually edited later in the drawio app.

Maintain all visual elements and flow structure of the original chart template while updating only the dollar amounts, percentages, and client-specific information.`
    },
    {
        image: "LRBA.png",
        title: "LRBA",
        text: `Extract from the SOA:
1. SMSF name and trustee details
2. Property/asset being purchased
3. Loan amount and terms
4. Holding trust structure
5. Repayment strategy
6. Compliance considerations

For any information not found in the SOA, use "[REDACTED]" as a placeholder. Do NOT ask for missing information - these placeholders will be manually edited later in the drawio app.

Maintain all visual elements and flow structure of the original chart template while updating only the financial data and LRBA-specific information.`
    },
    {
        image: "Invest Lump Sum .png",
        title: "Invest Lump Sum",
        text: `When analyzing the SOA for lump sum investment, identify:
1. Source of funds (inheritance, property sale, etc.)
2. Total amount to be invested
3. Recommended investment vehicle (managed fund, direct shares, etc.)
4. Asset allocation strategy
5. Timeframe and investment objectives
6. Any dollar cost averaging approach

For any information not found in the SOA, use "[REDACTED]" as a placeholder. Do NOT ask for missing information - these placeholders will be manually edited later in the drawio app.

Maintain all visual elements and flow structure of the original chart template while updating only the financial data and investment-specific information.`
    },
    {
        image: "Downsizer Contribution.png",
        title: "Downsizer Contribution",
        text: `For this chart, locate in the SOA:
1. Property sale details (address, sale price, settlement date)
2. Client's age verification (must be 55+ for eligibility)
3. Contribution amount (up to the eligible limit)
4. Target super fund
5. Timing of the contribution
6. Ownership verification (10+ year ownership requirement)

For any information not found in the SOA, use "[REDACTED]" as a placeholder. Do NOT ask for missing information - these placeholders will be manually edited later in the drawio app.

Maintain all visual elements and flow structure of the original chart template while updating only the property details, contribution amounts, and client-specific information.`
    },
    {
        image: "Contributions.png",
        title: "Contributions",
        text: `When analyzing contribution strategies in the SOA, focus on:
1. Type of contributions (concessional, non-concessional, spouse, etc.)
2. Contribution amounts and frequency
3. Source of funds for contributions
4. Contribution caps and eligibility
5. Tax implications and benefits
6. Total annual contribution strategy

For any information not found in the SOA, use "[REDACTED]" as a placeholder. Do NOT ask for missing information - these placeholders will be manually edited later in the drawio app.

Maintain all visual elements and flow structure of the original chart template while updating only the contribution amounts, types, and client-specific information.`
    },
    {
        image: "Cancel Insurance in Super.png",
        title: "Cancel Insurance in Super",
        text: `For this chart, extract from the SOA:
1. Current super fund name
2. Types of insurance being cancelled (life, TPD, income protection)
3. Current premium amounts
4. Reasoning for cancellation
5. Alternative insurance arrangements (if any)
6. Effective date of cancellation

For any information not found in the SOA, use "[REDACTED]" as a placeholder. Do NOT ask for missing information - these placeholders will be manually edited later in the drawio app.

Maintain all visual elements and flow structure of the original chart template while updating only the insurance details and client-specific information.`
    }
];

// Function to populate the gallery
function populateGallery() {
    const gallery = document.getElementById('imageGallery');
    
    // Create gallery items for display
    galleryData.forEach((item, index) => {
        const galleryItem = document.createElement('div');
        galleryItem.className = 'gallery-item';
        galleryItem.setAttribute('data-index', index);
        
        const img = document.createElement('img');
        img.src = item.image;
        img.alt = item.title;
        img.className = 'gallery-image';
        
        const title = document.createElement('h3');
        title.className = 'gallery-title';
        title.textContent = item.title;
        
        galleryItem.appendChild(img);
        galleryItem.appendChild(title);
        gallery.appendChild(galleryItem);
        
        galleryItem.addEventListener('click', () => {
            openModal(index);
        });
    });
}

// Function to open modal with image and text
function openModal(index) {
    const modal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    const modalTitle = document.getElementById('modalTitle');
    const textToCopy = document.getElementById('textToCopy');
    const copySuccess = document.getElementById('copySuccess');
    
    const item = galleryData[index];
    
    modalImage.src = item.image;
    modalImage.alt = item.title;
    modalTitle.textContent = item.title;
    textToCopy.textContent = item.text;
    copySuccess.style.display = 'none';
    
    modal.style.display = 'flex';
}

// Function to close modal
function closeModal() {
    const modal = document.getElementById('imageModal');
    modal.style.display = 'none';
}

// Function to copy text
function copyText() {
    const textToCopy = document.getElementById('textToCopy');
    const copySuccess = document.getElementById('copySuccess');
    
    navigator.clipboard.writeText(textToCopy.textContent)
        .then(() => {
            copySuccess.style.display = 'block';
            setTimeout(() => {
                copySuccess.style.display = 'none';
            }, 2000);
        })
        .catch(err => {
            console.error('Failed to copy text: ', err);
            alert('Failed to copy text to clipboard');
        });
}

// Initialize the gallery when the document is loaded
document.addEventListener('DOMContentLoaded', () => {
    populateGallery();
    
    // Add event listeners
    document.getElementById('closeModal').addEventListener('click', closeModal);
    document.getElementById('copyButton').addEventListener('click', copyText);
    
    // Close modal when clicking outside the content
    document.getElementById('imageModal').addEventListener('click', (e) => {
        if (e.target === document.getElementById('imageModal')) {
            closeModal();
        }
    });
});
